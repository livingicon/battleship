(()=>{"use strict";var e={d:(t,l)=>{for(var r in l)e.o(l,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:l[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Z:()=>s});const t=(()=>{document.getElementById("gameBoards");let e=[];const t=[],l=[],r=document.getElementById("directionBtn"),i=document.getElementById("player");let a=[];r.addEventListener("click",(()=>{const e=document.querySelectorAll(".dragShip"),t=document.getElementById("Carrier"),l=document.getElementById("Battleship"),r=document.getElementById("Cruiser"),i=document.getElementById("Submarine"),s=document.getElementById("Destroyer");if(""===fleet.style.display){if(document.getElementById("fleet").style.display="flex",e.forEach((e=>{e.style.display="block"})),t){let e=t.getAttribute("data-measure");t.style.width=`${e}`,t.style.height=5*parseInt(e)+"px",t.style.marginRight="0px"}if(l){let e=l.getAttribute("data-measure");l.style.width=`${e}`,l.style.height=4*parseInt(e)+"px",l.style.marginRight="0px"}if(r){let e=r.getAttribute("data-measure");r.style.width=`${e}`,r.style.height=3*parseInt(e)+"px",r.style.marginRight="0px"}if(i){let e=i.getAttribute("data-measure");i.style.width=`${e}`,i.style.height=3*parseInt(e)+"px",i.style.marginRight="0px"}if(s){let e=s.getAttribute("data-measure");s.style.width=`${e}`,s.style.height=2*parseInt(e)+"px",s.style.marginRight="0px"}}else if(fleet.style.display="block"){if(document.getElementById("fleet").style.display="",e.forEach((e=>{e.style.display="flex"})),t){let e=t.getAttribute("data-measure");t.style.width=5*parseInt(e)+"px",t.style.height=`${e}`}if(l){let e=l.getAttribute("data-measure");l.style.width=4*parseInt(e)+"px",l.style.height=`${e}`}if(r){let e=r.getAttribute("data-measure");r.style.width=3*parseInt(e)+"px",r.style.height=`${e}`}if(i){let e=i.getAttribute("data-measure");i.style.width=3*parseInt(e)+"px",i.style.height=`${e}`}if(s){let e=s.getAttribute("data-measure");s.style.width=2*parseInt(e)+"px",s.style.height=`${e}`}}})),i.addEventListener("dragover",(function(e){e.preventDefault()})),i.addEventListener("dragenter",(function(e){e.preventDefault()})),i.addEventListener("drop",(function(e){if(a.length>1)for(let e=a.length-2;e>=0;e--)a.splice(a.indexOf(a[e]),1);const t=e.dataTransfer.getData("text"),l=e.target;a.push(l.getAttribute("data-playcell")),a.push(t),c(t)}));const n=e=>{e.dataTransfer.setData("text/plain",e.target.id)},d=e=>{a.push(e.target.getAttribute("data-cell"))},c=e=>{const l=document.getElementById("fleet");let r,i,n=a[2],d=[Number(a[1])];if("Carrier"===a[2]&&(r=0,i=5),"Battleship"===a[2]&&(r=1,i=4),"Cruiser"===a[2]&&(r=2,i=3),"Submarine"===a[2]&&(r=3,i=3),"Destroyer"===a[2]&&(r=4,i=2),""===l.style.display){let e=i-a[0],t=a[0]-1;for(let t=1;t<=e;t++)d.push(Number(a[1])+t);for(let e=1;e<=t;e++)d.unshift(Number(a[1])-e)}else if("flex"===l.style.display){let e=a[0]-1,t=i-a[0];for(let t=1;t<=e;t++)d.unshift(Number(a[1])-10*t);for(let e=1;e<=t;e++)d.push(Number(a[1])+10*e)}u(d)&&!0!==o(d,0)?(document.getElementById(e).remove(),s.playerGrid.placeShip(r,0,n,d),a=[],h(),(()=>{const e=document.getElementById("playerBattle"),l=document.getElementById("computerArea"),r=document.getElementById("instructions"),i=document.getElementById("harbor"),s=document.getElementById("directionBtn"),a=document.getElementById("key");5===t.length&&(e.style.display="block",l.style.display="block",a.style.display="block",r.innerHTML="Attack the enemy fleet by clicking on their waters. You can see the status of both fleets under their waters.",i.style.display="none",s.style.display="none")})()):(a=[],h())},o=(e,r)=>{let i;i=0===r?t:l;for(let t=0;t<i.length;t++)for(let l=0;l<i[t].location.length;l++)if(-1!==e.indexOf(i[t].location[l]))return!0},u=(e,t)=>{const l=document.getElementById("fleet");return""===l.style.display?!(e.includes(0)||e.includes(10)&&e.includes(11)||e.includes(20)&&e.includes(21)||e.includes(30)&&e.includes(31)||e.includes(40)&&e.includes(41)||e.includes(50)&&e.includes(51)||e.includes(60)&&e.includes(61)||e.includes(70)&&e.includes(71)||e.includes(80)&&e.includes(81)||e.includes(90)&&e.includes(91)||e.includes(101)):"flex"===l.style.display?!(Math.min(...e)<1||Math.max(...e)>100):void 0},m=(e,t,l,r,i)=>{if(!0!==p(e,r)&&!0!==o(r,1))i.placeShip(t,1,l,r);else{if(1===e){let s=r.length,a=Math.floor(100*Math.random())+1;r=[a];for(let e=1;e<s;e++)r.push(a+e);m(e,t,l,r,i)}if(2===e){let s=r.length,a=Math.floor(100*Math.random())+1;r=[a];for(let e=1;e<s;e++)r.push(a+10*e);m(e,t,l,r,i)}}},p=(e,t)=>2===e&&Math.max(...t)>100||!(1!==e||!(t.includes(10)&&t.includes(11)||t.includes(20)&&t.includes(21)||t.includes(30)&&t.includes(31)||t.includes(40)&&t.includes(41)||t.includes(50)&&t.includes(51)||t.includes(60)&&t.includes(61)||t.includes(70)&&t.includes(71)||t.includes(80)&&t.includes(81)||t.includes(90)&&t.includes(91)||t.includes(101)))||void 0,h=()=>{for(let e=0;e<t.length;e++)for(let l=0;l<t[e].location.length;l++)document.querySelector(`[data-playcell='${t[e].location[l]}']`).classList.add("ship")},y=()=>location.reload();return{renderGrids:()=>{const e=document.getElementById("player"),t=document.getElementById("computer");for(let l=1;l<=100;l++){const r=document.createElement("div");r.classList.add("playCell"),r.setAttribute("data-playcell",l),e.appendChild(r);const i=document.createElement("div");i.classList.add("compCell"),i.setAttribute("data-compcell",l),t.appendChild(i)}},gameOver:e=>{const t=document.getElementById("info"),l=document.getElementById("instructions"),r=document.createElement("button");if(r.innerHTML="PLAY AGAIN",r.setAttribute("id","resetBtn"),r.addEventListener("click",y),t.removeChild(l),t.appendChild(r),e===s.playerGrid){const e=document.getElementById("enemyStatus");e.innerHTML="VICTORY",e.style.color="#d31414";const t=document.getElementById("playerStatus");t.innerHTML="DEFEAT",t.style.color="#d31414"}else{const e=document.getElementById("playerStatus");e.innerHTML="VICTORY",e.style.color="#d31414";const t=document.getElementById("enemyStatus");t.innerHTML="DEFEAT",t.style.color="#d31414"}},sunk:(e,t)=>{let l;l=t===s.computerGrid?"comp":"play",document.getElementById(`${l}${e}`).classList.add("sunk")},checkSmartHits:t=>{e[0]%10==0&&t.splice(2,1),e[0]%10==1&&t.splice(1,1);for(let e=t.length-1;e>=0;e--)(t[e]<=0||t[e]>100||1===s.playerGrid.waterGrid[t[e]-1].hit||1===s.playerGrid.waterGrid[t[e]-1].miss)&&t.splice(t.indexOf(t[e]),1)},placeComputerShip:e=>{const t=[[0,"Carrier",4],[1,"Battleship",3],[2,"Cruiser",2],[3,"Submarine",2],[4,"Destroyer",1]];for(let l=0;l<t.length;l++){let r=l,i=t[l][1],s=[],a=e;const n=Math.floor(2*Math.random())+1,d=Math.floor(100*Math.random())+1;if(s.push(d),1===n){for(let e=1;e<=t[l][2];e++)s.push(d+e);m(n,r,i,s,a)}if(2===n){for(let e=1;e<=t[l][2];e++)s.push(d+10*e);m(n,r,i,s,a)}}},addDragListeners:()=>{document.querySelectorAll(".dragCell").forEach((e=>{e.addEventListener("mousedown",d)})),document.querySelectorAll(".dragShip").forEach((e=>{e.addEventListener("dragstart",n);const t=getComputedStyle(e).height;e.setAttribute("data-measure",t)}))},logFleet:(e,r)=>{let i;i=0===e?t:l,0===i.length?i.push(r):0!==i.length&&(i.push(r),i.sort((function(e,t){return e.id-t.id})))},addListeners:e=>{document.querySelectorAll(".compCell").forEach((t=>{t.addEventListener("click",e.playerAttack)}))},removeListeners:()=>{document.querySelectorAll(".compCell").forEach((e=>{e.removeEventListener("click",s.human.playerAttack)}))},hitOrMiss:e=>{let t;t=e===s.playerGrid?"playcell":"compcell";for(let l=0;l<100;l++)1===e.waterGrid[l].hit&&document.querySelector(`[data-${t}='${l+1}']`).classList.add("hit"),1===e.waterGrid[l].miss&&document.querySelector(`[data-${t}='${l+1}']`).classList.add("miss")},playerFleet:t,enemyFleet:l,loggedHitAI:e,smartHits:[]}})(),l=t,r=class{constructor(){this.totalHits=0,this.waterGrid=[]}createGameboard(){for(let e=1;e<=100;e++)this.waterGrid.push({cell:e,hit:0,miss:0});return this.waterGrid}placeShip(e,t,r,i,s=0){let a;a=0===t?new Ship(e,0,r,i,s):new Ship(e,1,r,i,s),l.logFleet(t,a)}receiveAttack(e,t){let r;r=t===s.playerGrid?l.playerFleet:l.enemyFleet;for(let i=0;i<r.length;i++)for(let s=0;s<r[i].location.length;s++)e===r[i].location[s]&&(t.waterGrid[e-1].hit=1,r[i].hit(),r[i].isSunk(t),t.allSunk(t),r===l.playerFleet&&(l.loggedHitAI=[],l.loggedHitAI.push(t.waterGrid[e-1].cell)));0===t.waterGrid[e-1].hit&&(t.waterGrid[e-1].miss=1),l.hitOrMiss(t)}allSunk(e){for(let t=0;t<100;t++)1===e.waterGrid[t].hit&&e.totalHits++;17===e.totalHits?(l.removeListeners(s.human),l.gameOver(e)):17!==e.totalHits&&(e.totalHits=0)}},i=class{constructor(e){this.player=e}playerAttack(e){let t=Number(e.target.getAttribute("data-compcell"));1===s.computerGrid.waterGrid[t-1].hit||1===s.computerGrid.waterGrid[t-1].miss||(s.computerGrid.receiveAttack(t,s.computerGrid),0===s.computerGrid.totalHits&&s.computer.computerAttack(s.playerGrid))}computerAttack(e){const t=Math.floor(100*Math.random())+1;if(1===l.loggedHitAI.length)if(l.smartHits.push(l.loggedHitAI[0]-10,l.loggedHitAI[0]-1,l.loggedHitAI[0]+1,l.loggedHitAI[0]+10),l.checkSmartHits(l.smartHits),0===l.smartHits.length)l.loggedHitAI=[],s.computer.computerAttack(s.playerGrid);else{const t=l.smartHits[Math.floor(Math.random()*l.smartHits.length)];l.smartHits=[],e.receiveAttack(t,e)}else 1===e.waterGrid[t-1].hit||1===e.waterGrid[t-1].miss?s.computer.computerAttack(s.playerGrid):e.receiveAttack(t,e)}},s=(()=>{const e=new i,t=new i,s=new r,a=new r;return s.createGameboard(),a.createGameboard(),l.placeComputerShip(a),l.addDragListeners(),l.renderGrids(),l.addListeners(e),{human:e,computer:t,playerGrid:s,computerGrid:a}})()})();