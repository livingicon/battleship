(()=>{"use strict";document.getElementById("gameBoards"),(()=>{let e=[];document.getElementById("directionBtn").addEventListener("click",(function(){const e=document.querySelectorAll(".dragShip"),t=document.getElementById("Carrier"),i=getComputedStyle(t).height,l=document.getElementById("Battleship"),r=document.getElementById("Cruiser"),s=document.getElementById("Submarine"),a=document.getElementById("Destroyer");if(""===fleet.style.display){if(document.getElementById("fleet").style.display="flex",e.forEach((e=>{e.style.display="block",e.setAttribute("data-measure",i)})),t){let e=t.getAttribute("data-measure");t.style.width=`${e}`,t.style.height=5*parseInt(e)+"px"}if(l){let e=l.getAttribute("data-measure");l.style.width=`${e}`,l.style.height=4*parseInt(e)+"px"}if(r){let e=r.getAttribute("data-measure");r.style.width=`${e}`,r.style.height=3*parseInt(e)+"px"}if(s){let e=s.getAttribute("data-measure");s.style.width=`${e}`,s.style.height=3*parseInt(e)+"px"}if(a){let e=a.getAttribute("data-measure");a.style.width=`${e}`,a.style.height=2*parseInt(e)+"px"}}else if(fleet.style.display="block"){if(document.getElementById("fleet").style.display="",e.forEach((e=>{e.style.display="flex",e.setAttribute("data-measure",i)})),t){let e=t.getAttribute("data-measure");t.style.width=`${e}`,t.style.height=parseInt(e)/5+"px"}if(l){let e=l.getAttribute("data-measure");l.style.width=parseInt(e)/5*4+"px",l.style.height=parseInt(e)/5+"px"}if(r){let e=r.getAttribute("data-measure");r.style.width=parseInt(e)/5*3+"px",r.style.height=parseInt(e)/5+"px"}if(s){let e=s.getAttribute("data-measure");s.style.width=parseInt(e)/5*3+"px",s.style.height=parseInt(e)/5+"px"}if(a){let e=a.getAttribute("data-measure");a.style.width=parseInt(e)/5*2+"px",a.style.height=parseInt(e)/5+"px"}}}));const t=document.getElementById("player");t.addEventListener("dragover",(function(e){e.preventDefault()})),t.addEventListener("dragenter",(function(e){e.preventDefault()})),t.addEventListener("drop",(function(t){if(e.length>1)for(let t=e.length-2;t>=0;t--)e.splice(e.indexOf(e[t]),1);const i=t.dataTransfer.getData("text"),r=t.target;e.push(r.getAttribute("data-playcell")),e.push(i),l(i)}));const l=t=>{const i=document.getElementById("fleet");let l,a,n=e[2],d=[Number(e[1])];if("Carrier"===e[2]&&(l=0,a=5),"Battleship"===e[2]&&(l=1,a=4),"Cruiser"===e[2]&&(l=2,a=3),"Submarine"===e[2]&&(l=3,a=3),"Destroyer"===e[2]&&(l=4,a=2),""===i.style.display){let t=a-e[0],i=e[0]-1;for(let i=1;i<=t;i++)d.push(Number(e[1])+i);for(let t=1;t<=i;t++)d.unshift(Number(e[1])-t)}else if("flex"===i.style.display){let t=e[0]-1,i=a-e[0];for(let i=1;i<=t;i++)d.unshift(Number(e[1])-10*i);for(let t=1;t<=i;t++)d.push(Number(e[1])+10*t)}s(d)&&!0!==r(d,0)?(document.getElementById(t).remove(),playerGrid.placeShip(l,0,n,d),e=[],shipColor(),(()=>{const e=document.getElementById("playerBattle"),t=document.getElementById("computerArea"),i=document.getElementById("instructions"),l=document.getElementById("harbor"),r=document.getElementById("directionBtn"),s=document.getElementById("key");5===playerFleet.length&&(e.style.display="block",t.style.display="block",s.style.display="block",i.innerHTML="Attack the enemy fleet by clicking on their waters.",l.style.display="none",r.style.display="none")})()):(e=[],shipColor())},r=(e,t)=>{let l;for(l=0===t?playerFleet:enemyFleet,i=0;i<l.length;i++)for(let t=0;t<l[i].location.length;t++)if(-1!==e.indexOf(l[i].location[t]))return!0},s=(e,t)=>{const i=document.getElementById("fleet");return""===i.style.display?!(e.includes(0)||e.includes(10)&&e.includes(11)||e.includes(20)&&e.includes(21)||e.includes(30)&&e.includes(31)||e.includes(40)&&e.includes(41)||e.includes(50)&&e.includes(51)||e.includes(60)&&e.includes(61)||e.includes(70)&&e.includes(71)||e.includes(80)&&e.includes(81)||e.includes(90)&&e.includes(91)||e.includes(101)):"flex"===i.style.display?!(Math.min(...e)<1||Math.max(...e)>100):void 0}})();const e=class{constructor(e){this.player=e}playerAttack(e){let t=Number(e.target.getAttribute("data-compcell"));1===computerGrid.waterGrid[t-1].hit||1===computerGrid.waterGrid[t-1].miss||(computerGrid.receiveAttack(t,computerGrid),0===computerGrid.totalHits&&computer.computerAttack(playerGrid))}computerAttack(e){const t=Math.floor(100*Math.random())+1;if(1===loggedHitAI.length)if(smartHits.push(loggedHitAI[0]-10,loggedHitAI[0]-1,loggedHitAI[0]+1,loggedHitAI[0]+10),checkSmartHits(smartHits),0===smartHits.length)loggedHitAI=[],computer.computerAttack(playerGrid);else{const t=smartHits[Math.floor(Math.random()*smartHits.length)];smartHits=[],e.receiveAttack(t,e)}else 1===e.waterGrid[t-1].hit||1===e.waterGrid[t-1].miss?computer.computerAttack(playerGrid):e.receiveAttack(t,e)}},t=class{constructor(){this.totalHits=0,this.waterGrid=[]}createGameboard(){for(let e=1;e<=100;e++)this.waterGrid.push({cell:e,hit:0,miss:0});return this.waterGrid}placeShip(e,t,i,r,s=0){let a;a=new l(e,0===t?0:1,i,r,s),logFleet(t,a)}receiveAttack(e,t){let i;i=t===playerGrid?playerFleet:enemyFleet;for(let l=0;l<i.length;l++)for(let r=0;r<i[l].location.length;r++)e===i[l].location[r]&&(t.waterGrid[e-1].hit=1,i[l].hit(),i[l].isSunk(t),t.allSunk(t),i===playerFleet&&(loggedHitAI=[],loggedHitAI.push(t.waterGrid[e-1].cell)));0===t.waterGrid[e-1].hit&&(t.waterGrid[e-1].miss=1),hitOrMiss(t)}allSunk(e){for(let t=0;t<100;t++)1===e.waterGrid[t].hit&&e.totalHits++;17===e.totalHits?(removeListeners(),gameOver(e)):17!==e.totalHits&&(e.totalHits=0)}},l=class{constructor(e,t,i,l,r=0){this.id=e,this.side=t,this.name=i,this.location=l,this.length=l.length,this.hits=r}hit(){this.hits++}isSunk(e){this.length===this.hits&&sunk(this.name,e)}},r=(new e,new e,new t),s=new t;r.createGameboard(),s.createGameboard(),placeComputerShip(),addDragListeners(),renderGrids()})();