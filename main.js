(()=>{class t{constructor(t,e,l,i,s=0){this.id=t,this.side=e,this.name=l,this.location=i,this.length=i.length,this.hits=s}hit(){this.hits++}isSunk(t){this.length===this.hits&&h(this.name,t)}}class e{constructor(){this.totalHits=0,this.waterGrid=[]}createGameboard(){for(let t=1;t<=100;t++)this.waterGrid.push({cell:t,hit:0,miss:0});return this.waterGrid}placeShip(e,l,i,s,n=0){let r;r=new t(e,0===l?0:1,i,s,n),w(l,r)}receiveAttack(t,e){let l;l=e===C?S:E;for(let i=0;i<l.length;i++)for(let n=0;n<l[i].location.length;n++)t===l[i].location[n]&&(e.waterGrid[t-1].hit=1,l[i].hit(),l[i].isSunk(e),e.allSunk(e),l===S&&(s=[],s.push(e.waterGrid[t-1].cell)));0===e.waterGrid[t-1].hit&&(e.waterGrid[t-1].miss=1),c(e)}allSunk(t){for(let e=0;e<100;e++)1===t.waterGrid[e].hit&&t.totalHits++;17===t.totalHits?(d(),u(t)):17!==t.totalHits&&(t.totalHits=0)}}class l{constructor(t){this.player=t}playerAttack(t){let e=Number(t.target.getAttribute("data-compcell"));1===k.waterGrid[e-1].hit||1===k.waterGrid[e-1].miss||(k.receiveAttack(e,k),0===k.totalHits&&A.computerAttack(C))}computerAttack(t){const e=Math.floor(100*Math.random())+1;if(1===s.length)if(n.push(s[0]-10,s[0]-1,s[0]+1,s[0]+10),r(n),0===n.length)s=[],A.computerAttack(C);else{const e=n[Math.floor(Math.random()*n.length)];n=[],t.receiveAttack(e,t)}else 1===t.waterGrid[e-1].hit||1===t.waterGrid[e-1].miss?A.computerAttack(C):t.receiveAttack(e,t)}}document.getElementById("gameBoards");let s=[],n=[];const r=t=>{s[0]%10==0&&t.splice(2,1),s[0]%10==1&&t.splice(1,1);for(let e=t.length-1;e>=0;e--)(t[e]<=0||t[e]>100||1===C.waterGrid[t[e]-1].hit||1===C.waterGrid[t[e]-1].miss)&&t.splice(t.indexOf(t[e]),1)},d=()=>{document.querySelectorAll(".compCell").forEach((t=>{t.removeEventListener("click",I.playerAttack)}))},a=(t,e,l,i)=>{if(!0!==o(t,i)&&!0!==f(i,1))k.placeShip(e,1,l,i);else{if(1===t){let s=i.length,n=Math.floor(100*Math.random())+1;i=[n];for(let t=1;t<s;t++)i.push(n+t);a(t,e,l,i)}if(2===t){let s=i.length,n=Math.floor(100*Math.random())+1;i=[n];for(let t=1;t<s;t++)i.push(n+10*t);a(t,e,l,i)}}},o=(t,e)=>2===t&&Math.max(...e)>100||!(1!==t||!(e.includes(10)&&e.includes(11)||e.includes(20)&&e.includes(21)||e.includes(30)&&e.includes(31)||e.includes(40)&&e.includes(41)||e.includes(50)&&e.includes(51)||e.includes(60)&&e.includes(61)||e.includes(70)&&e.includes(71)||e.includes(80)&&e.includes(81)||e.includes(90)&&e.includes(91)||e.includes(101)))||void 0,c=t=>{let e;e=t===C?"playcell":"compcell";for(let l=0;l<100;l++)1===t.waterGrid[l].hit&&document.querySelector(`[data-${e}='${l+1}']`).classList.add("hit"),1===t.waterGrid[l].miss&&document.querySelector(`[data-${e}='${l+1}']`).classList.add("miss")},h=(t,e)=>{let l;l=e===k?"comp":"play",document.getElementById(`${l}${t}`).classList.add("sunk")},u=t=>{const e=document.getElementById("info"),l=document.getElementById("instructions"),i=document.createElement("button");i.innerHTML="RESET",i.addEventListener("click",m),e.removeChild(l),e.appendChild(i),t===C?(document.getElementById("enemyStatus").innerHTML="ENEMY STATUS: You are VICTORIOUS!",document.getElementById("playerStatus").innerHTML="PLAYER STATUS: Your Fleet Lies in RUIN!"):(document.getElementById("playerStatus").innerHTML="PLAYER STATUS: You are VICTORIOUS!",document.getElementById("enemyStatus").innerHTML="ENEMY STATUS: Your Fleet Lies in RUIN!")},m=()=>location.reload();let p=[];document.getElementById("directionBtn").addEventListener("click",(function(){console.log("button working");const t=document.querySelectorAll(".dragShip"),e=document.getElementById("Carrier"),l=document.getElementById("Battleship"),i=document.getElementById("Cruiser"),s=document.getElementById("Submarine"),n=document.getElementById("Destroyer");if(""===fleet.style.display){if(document.getElementById("fleet").style.display="flex",t.forEach((t=>{t.style.display="block"})),e){const t=getComputedStyle(e).carWidth;e.style.width=`${t}`,e.style.height=5*parseInt(t)+"px"}if(l){const t=getComputedStyle(l).batWidth;l.style.width=`${t}`,l.style.height=4*parseInt(t)+"px"}if(i){const t=getComputedStyle(i).cruisWidth;i.style.width=`${t}`,i.style.height=3*parseInt(t)+"px"}if(s){const t=getComputedStyle(s).subWidth;s.style.width=`${t}`,s.style.height=3*parseInt(t)+"px"}if(n){const t=getComputedStyle(n).destWidth;n.style.width=`${t}`,n.style.height=2*parseInt(t)+"px"}}else if(fleet.style.display="block"){if(document.getElementById("fleet").style.display="",t.forEach((t=>{t.style.display="flex"})),e){const t=getComputedStyle(e).carWidth;e.style.width=5*parseInt(t)+"px",e.style.height=`${t}`}if(l){const t=getComputedStyle(l).batWidth;l.style.width=4*parseInt(t)+"px",l.style.height=`${t}`}if(i){const t=getComputedStyle(i).cruisWidth;i.style.width=3*parseInt(t)+"px",i.style.height=`${t}`}if(s){const t=getComputedStyle(s).subWidth;s.style.width=3*parseInt(t)+"px",s.style.height=`${t}`}if(n){const t=getComputedStyle(n).destWidth;n.style.width=2*parseInt(t)+"px",n.style.height=`${t}`}}}));const y=t=>{t.dataTransfer.setData("text/plain",t.target.id)},g=t=>{console.log("log ship cell working"),p.push(t.target.getAttribute("data-cell"))},f=(t,e)=>{let l;for(l=0===e?S:E,i=0;i<l.length;i++)for(let e=0;e<l[i].location.length;e++)if(-1!==t.indexOf(l[i].location[e]))return!0},S=[],E=[],w=(t,e)=>{let l;l=0===t?S:E,0===l.length?l.push(e):0!==l.length&&(l.push(e),l.sort((function(t,e){return t.id-e.id})))},I=new l,A=new l,C=new e,k=new e;C.createGameboard(),k.createGameboard(),(()=>{const t=[[0,"Carrier",4],[1,"Battleship",3],[2,"Cruiser",2],[3,"Submarine",2],[4,"Destroyer",1]];for(let e=0;e<t.length;e++){let l=e,i=t[e][1],s=[];const n=Math.floor(2*Math.random())+1,r=Math.floor(100*Math.random())+1;if(s.push(r),1===n){for(let l=1;l<=t[e][2];l++)s.push(r+l);a(n,l,i,s)}if(2===n){for(let l=1;l<=t[e][2];l++)s.push(r+10*l);a(n,l,i,s)}}})(),document.querySelectorAll(".dragCell").forEach((t=>{t.addEventListener("mousedown",g)})),document.querySelectorAll(".dragShip").forEach((t=>{t.addEventListener("dragstart",y)})),(()=>{const t=document.getElementById("player"),e=document.getElementById("computer");for(let l=1;l<=100;l++){const i=document.createElement("div");i.classList.add("playCell"),i.setAttribute("data-playcell",l),t.appendChild(i);const s=document.createElement("div");s.classList.add("compCell"),s.setAttribute("data-compcell",l),e.appendChild(s),document.querySelectorAll(".compCell").forEach((t=>{t.addEventListener("click",I.playerAttack)}))}})()})();